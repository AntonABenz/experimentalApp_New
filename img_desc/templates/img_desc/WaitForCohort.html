{% extends "otree/Page.html" %}
{% load otree static %}

{% block title %}
Please wait
{% endblock %}

{% block content %}
<style>
  .wait-wrap {
    max-width: 820px;
    margin: 24px auto;
    padding: 18px 18px 10px;
    border: 1px solid #e5e5e5;
    border-radius: 10px;
    background: #fff;
  }
  .muted { color: #666; }
  .big { font-size: 1.05rem; }
  .pill {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 999px;
    background: #f2f2f2;
    font-weight: 700;
    margin-left: 6px;
  }
</style>

<div class="wait-wrap">
  {% if waiting_for_prev %}
    <h3 class="mb-3">Waiting for the previous group to finish…</h3>
    <p class="big">
      Your cohort is ready, but the previous cohort ({{ prev_exp }}) must complete before the next cohort can start.
      This page will update automatically.
    </p>
  {% else %}
    <h3 class="mb-3">We’re preparing your session…</h3>
    <p class="big">
      Please wait while we assign you to a group.
      This page will update automatically.
    </p>
  {% endif %}

  <div class="mt-3 muted">
    Target cohort:
    <span class="pill">{{ exp_target }}</span>
    &nbsp; | &nbsp;
    Slot:
    <span class="pill">
      {% if local_slot %}{{ local_slot }}{% else %}pending{% endif %}
    </span>
  </div>

  <hr>

  <p class="muted">
    If this page doesn’t advance after a few minutes, please contact the experimenter.
  </p>

  <button type="button" class="btn btn-secondary" onclick="location.reload()">
    Reload now
  </button>
</div>

<script>
  setTimeout(() => location.reload(), 15000);
</script>
{% endblock %}
