{% extends "otree/Page.html" %}
{% load otree static %}

{% block title %}
Please wait
{% endblock %}

{% block content %}
<style>
  .wait-wrap {
    max-width: 820px;
    margin: 24px auto;
    padding: 18px 18px 10px;
    border: 1px solid #e5e5e5;
    border-radius: 10px;
    background: #fff;
  }
  .muted { color: #666; }
  .big { font-size: 1.15rem; }
  .pill {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 999px;
    background: #f2f2f2;
    font-weight: 700;
    margin-left: 6px;
  }
</style>

<div class="wait-wrap">
  <h3 class="mb-3">Waiting for previous experiment to finish…</h3>

  <p class="big">
    Some required data from an earlier cohort is not available yet.
    This page will update automatically.
  </p>

  <div class="mt-3">
    <div class="muted">
      Required keys:
      <span class="pill">{{ needed }}</span>
    </div>
    <div class="muted mt-1">
      Still missing:
      <span class="pill">{{ missing }}</span>
    </div>
  </div>

  <hr>

  <p class="muted">
    If this page doesn’t advance after a few minutes, please contact the experimenter.
  </p>

  <button type="button" class="btn btn-secondary" onclick="location.reload()">
    Reload now
  </button>
</div>

<script>
  // simple auto-refresh
  setTimeout(() => location.reload(), 6000);
</script>
{% endblock %}
