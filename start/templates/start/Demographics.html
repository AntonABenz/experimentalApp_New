{% extends "otree/Page.html" %}
{% block title %}Demographics{% endblock %}
{% block content %}
  <input type="hidden" name="survey_data" id="survey_data">

  <!-- your visible inputs ... -->
  <div class="form-group">
    <label>Age</label>
    <input name="age" type="number" min="18" max="100" class="form-control" required>
  </div>
  <!-- etc. -->

  {% next_button %}
{% endblock %}

{% block scripts %}
<script>
  (function () {
    const form = document.querySelector('form');
    form.addEventListener('submit', function () {
      const fields = ['age','gender','native_language','country','education'];
      const data = {};
      fields.forEach(name => {
        const el = form.querySelector('[name="'+name+'"]');
        if (!el) return;
        if (el.type === 'radio') {
          const checked = form.querySelector('input[name="'+name+'"]:checked');
          data[name] = checked ? checked.value : '';
        } else {
          data[name] = el.value || '';
        }
      });
      document.getElementById('survey_data').value = JSON.stringify(data);
    });
  })();
</script>
{% endblock %}
